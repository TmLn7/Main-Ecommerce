{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { url, setHeaders } from \"./api\";\nconst initialState = {\n  list: [],\n  status: null\n};\nexport const ordersFetch = createAsyncThunk(\"orders/ordersFetch\", async () => {\n  try {\n    const response = await axios.get(`${url}/orders`, setHeaders());\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const ordersEdit = createAsyncThunk(\"orders/ordersEdit\", async (values, _ref) => {\n  let {\n    getState\n  } = _ref;\n  const state = getState();\n  let currentOrder = state.orders.list.filter(order => order._id === values.id);\n  const newOrder = { ...currentOrder[0],\n    delivery_status: values.delivery_status\n  };\n\n  try {\n    const response = await axios.put(`${url}/orders/${values.id}`, newOrder, setHeaders());\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nconst ordersSlice = createSlice({\n  name: \"orders\",\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [ordersFetch.pending]: (state, action) => {\n      state.status = \"pending\";\n    },\n    [ordersFetch.fulfilled]: (state, action) => {\n      state.list = action.payload;\n      state.status = \"success\";\n    },\n    [ordersFetch.rejected]: (state, action) => {\n      state.status = \"rejected\";\n    },\n    [ordersEdit.pending]: (state, action) => {\n      state.status = \"pending\";\n    },\n    [ordersEdit.fulfilled]: (state, action) => {\n      const updatedOrders = state.list.map(order => order._id === action.payload._id ? action.payload : order);\n      state.list = updatedOrders;\n      state.status = \"success\";\n    },\n    [ordersEdit.rejected]: (state, action) => {\n      state.status = \"rejected\";\n    }\n  }\n});\nexport default ordersSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","url","setHeaders","initialState","list","status","ordersFetch","response","get","data","error","console","log","ordersEdit","values","getState","state","currentOrder","orders","filter","order","_id","id","newOrder","delivery_status","put","ordersSlice","name","reducers","extraReducers","pending","action","fulfilled","payload","rejected","updatedOrders","map","reducer"],"sources":["/Users/tmln/Desktop/Main-Ecommerce/client/src/slices/ordersSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { url, setHeaders } from \"./api\";\n\nconst initialState = {\n  list: [],\n  status: null,\n};\n\nexport const ordersFetch = createAsyncThunk(\"orders/ordersFetch\", async () => {\n  try {\n    const response = await axios.get(`${url}/orders`, setHeaders());\n\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nexport const ordersEdit = createAsyncThunk(\n  \"orders/ordersEdit\",\n  async (values, { getState }) => {\n    const state = getState();\n\n    let currentOrder = state.orders.list.filter(\n      (order) => order._id === values.id\n    );\n\n    const newOrder = {\n      ...currentOrder[0],\n      delivery_status: values.delivery_status,\n    };\n\n    try {\n      const response = await axios.put(\n        `${url}/orders/${values.id}`,\n        newOrder,\n        setHeaders()\n      );\n\n      return response.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n);\n\nconst ordersSlice = createSlice({\n  name: \"orders\",\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [ordersFetch.pending]: (state, action) => {\n      state.status = \"pending\";\n    },\n    [ordersFetch.fulfilled]: (state, action) => {\n      state.list = action.payload;\n      state.status = \"success\";\n    },\n    [ordersFetch.rejected]: (state, action) => {\n      state.status = \"rejected\";\n    },\n    [ordersEdit.pending]: (state, action) => {\n      state.status = \"pending\";\n    },\n    [ordersEdit.fulfilled]: (state, action) => {\n      const updatedOrders = state.list.map((order) =>\n        order._id === action.payload._id ? action.payload : order\n      );\n      state.list = updatedOrders;\n      state.status = \"success\";\n    },\n    [ordersEdit.rejected]: (state, action) => {\n      state.status = \"rejected\";\n    },\n  },\n});\n\nexport default ordersSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}